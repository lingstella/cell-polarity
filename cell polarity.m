I=imread('user\8bit\H1_R-ACTIN_1-图像导出-06-8bit.tif');%图像路径
I2=imread('user\8bit\A1_R-ACTIN_2-40X-10-8bit.tif');%

F=fft2((im2double(I)));
F2=fft2((im2double(I2)));
F=fftshift(F);
F=abs(F);
T=log(F+1);
F2=fftshift(F2);
F2=abs(F2);
T2=log(F2+1);
re1=getCurve(T);
re2=getCurve(T2);
r1=getcurve(T);
r2=getcurve(T2);

subplot(2,4,1);
imshow(I,[]);
title('原图');
 
subplot(2,4,2);
imshow(T,[]                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          );
title('傅里叶变换');

subplot(2,4,3);
plot(re1);

subplot(2,4,4);
plot(r1);

subplot(2,4,5);
imshow(I2,[]);
title('原图2');
 
subplot(2,4,6);
imshow(T2,[]);
title('傅里叶变换');

subplot(2,4,7);
plot(re2);

subplot(2,4,8);
plot(r2);


function re = getCurve(img)

[m,n]=size(img);

oy=m/2;
ox=n/2;

%求中心点到图像四个角的距离
up_left=sqrt((oy-0)^2+(ox-0)^2);
up_right=sqrt((oy-0)^2+(ox-n)^2);
down_left=sqrt((oy-m)^2+(ox-0)^2);
down_right=sqrt((oy-m)^2+(ox-n)^2);

num=360;
%求中心点距离四角距离的最大值，作为变换后图像的高。
%这个最大值也是极坐标变换的极径
radius=round(max([up_left up_right down_left down_right]));
re = zeros(num,1);

for i=0:1:radius          %极坐标
    for j=1:num       
       %oy,ox作为极坐标变换中心坐标，需要作为偏移量相加
       ind = j;
       h=round(oy+i*sin(ind*pi/180));
       w=round(ox+i*cos(ind*pi/180));
       
       if h>0 && w> 0&& h<=m && w<=n       %超出图像的像素忽略
           re(j)= re(j) +double(img(h,w));
       end
   end
end
%re = re/sum(re);
end

function re = getcurve(img)

[m,n]=size(img);

oy=m/2;
ox=n/2;

up_left=sqrt((oy-0)^2+(ox-0)^2);
up_right=sqrt((oy-0)^2+(ox-n)^2);
down_left=sqrt((oy-m)^2+(ox-0)^2);
down_right=sqrt((oy-m)^2+(ox-n)^2);

num=180;

radius=round(max([up_left up_right down_left down_right]));
re = zeros(num,1);

for i=0:1:radius          
    for j=1:num       
       ind = j;
       h=round(oy+i*sin(ind*pi/180));
       w=round(ox+i*cos(ind*pi/180));
       
       if h>0 && w> 0&& h<=m && w<=n      
           re(j)= re(j) +double(img(h,w));
       end
   end
end
re = re/sum(re);
end
